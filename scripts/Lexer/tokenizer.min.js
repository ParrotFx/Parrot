var Tokenizer=function(){function n(n){this._source=n,this._currentIndex=0}return n.prototype.hasAvailableTokens=function(){return this._currentIndex<this._source.length},n.prototype.peek=function(){return this._source.charAt(this._currentIndex)},n.prototype.consume=function(){if(this._currentIndex>=this._source.length)throw new EndOfStreamException;var n=this._source.charAt(this._currentIndex);return this._currentIndex++,n},n.prototype.consumeIdentifier=function(){for(var t="",n=this.peek();this.isIdTail(n);)this.consume(),t+=n,n=this.peek();return t},n.prototype.consumeWhitespace=function(){for(var t="",n=this.peek();this.isWhitespace(n);)this.consume(),t+=n,n=this.peek();return t},n.prototype.consumeUntilNewLine=function(){for(var t="",n=this.peek();!this.isNewLine(n);)this.consume(),t+=n,n=this.peek();return t},n.prototype.consumeQuotedStringLiteral=function(n){for(var i=this.consume(),t=this.peek();t!=n;)this.consume(),i+=t,t=this.peek();return i+this.consume()},n.prototype.isNewLine=function(n){return n=="\r"||n=="\n"},n.prototype.getNextToken=function(){var n;if(this.hasAvailableTokens()){if(n=this.peek(),this.isIdentifierHead(n))return new IdentifierToken(this._currentIndex,this.consumeIdentifier(),TokenType.identifier);if(this.isWhitespace(n))return new WhitespaceToken(this._currentIndex,this.consumeWhitespace(),TokenType.whitespace);switch(n){case",":return this.consume(),new CommaToken(this._currentIndex);case"(":return this.consume(),new OpenParenthesisToken(this._currentIndex);case")":return this.consume(),new CloseParenthesisToken(this._currentIndex);case"[":return this.consume(),new OpenBracketToken(this._currentIndex);case"]":return this.consume(),new CloseBracketToken(this._currentIndex);case"=":return this.consume(),new EqualToken(this._currentIndex);case"{":return this.consume(),new OpenBracesToken(this._currentIndex);case"}":return this.consume(),new CloseBracesToken(this._currentIndex);case">":return this.consume(),new GreaterThanToken(this._currentIndex);case"+":return this.consume(),new PlusToken(this._currentIndex);case"|":return new StringLiteralPipeToken(this._currentIndex,this.consumeUntilNewLine());case'"':return new QuotedStringLiteralToken(this._currentIndex,this.consumeQuotedStringLiteral('"'));case"'":return new QuotedStringLiteralToken(this._currentIndex,this.consumeQuotedStringLiteral("'"));case"@":return this.consume(),new AtToken(this._currentIndex);case'\0':return null;default:throw new UnexpectedTokenException("Unexpected token: "+n);}}return null},n.prototype.isWhitespace=function(n){return n=="\r"||n=="\n"||n==" "||n=="\f"||n=="\t"||n=="\x0b"},n.prototype.isIdentifierHead=function(n){return n.match(/[a-zA-Z]/)||n=="_"||n=="#"||n=="."},n.prototype.isIdTail=function(n){return n.match(/[0-9]/)||this.isIdentifierHead(n)||n==":"||n=="-"},n.prototype.tokenize=function(){for(var n,t=[];(n=this.getNextToken())!=null;)t.push(n);return t},n.prototype.tokens=function(){return this.tokenize()},n}(),EndOfStreamException=function(){function n(){}return n}(),UnexpectedTokenException=function(){function n(n){this.message=n}return n}()